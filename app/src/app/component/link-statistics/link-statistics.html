<div class="container">
  <div class="header">
    <h1>EstadÃ­sticas de Enlace</h1>
    <p>Monitorea el rendimiento de tus enlaces</p>
  </div>

  <!-- SEARCH -->
  <div class="search-card">
    <label>CÃ³digo del enlace</label>
    <div class="search-input-group">
      <input type="text" [(ngModel)]="shortCode" placeholder="Ej: https://miweb.com/12345" />
      <button class="btn btn-primary" (click)="searchStatistics()">
        ğŸ” Buscar
      </button>
    </div>
  </div>

  <!-- FILTERS -->
  <div class="filters" *ngIf="statistics">
    <div class="filter-card">
      <label>Filtrar por fecha especÃ­fica</label>
      <input type="date" [(ngModel)]="selectedDate" (change)="filterByDate()" />
    </div>

    <div class="filter-card">
      <label>Rango de fechas</label>
      <div class="date-range">
        <input type="date" [(ngModel)]="dateRange.start" />
        <span class="separator">â€”</span>
        <input type="date" [(ngModel)]="dateRange.end" />
      </div>
      <button class="btn btn-secondary" (click)="searchByDateRange()">
        ğŸ“… Buscar por rango
      </button>
    </div>
  </div>

  <!-- ERROR -->
  <div class="error" *ngIf="error">{{ error }}</div>

  <!-- LOADING -->
  <div class="loading" *ngIf="isLoading">
    <div class="spinner"></div>
    <div class="loading-text">Cargando estadÃ­sticas...</div>
  </div>

  <!-- RESULTS -->
  <ng-container *ngIf="statistics">
    <!-- SUMMARY CARDS -->
    <div class="summary">
      <div class="stat-card">
        <h3>ğŸ”¢ Total histÃ³rico</h3>
        <p>{{ statistics.totalVisitsEver }}</p>
      </div>

      <div class="stat-card">
        <h3>ğŸ“… Resumen</h3>
        <p class="summary-text">{{ statistics.reportSummary }}</p>
      </div>

      <div class="stat-card">
        <h3>ğŸ‘ PerÃ­odo actual</h3>
        <p>{{ statistics.visitsInPeriod }}</p>
      </div>
    </div>

    <!-- TABLE -->
    <div class="table-card" *ngIf="filteredStats.length > 0">
      <h2>ğŸ“† Visitas por dÃ­a</h2>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>Fecha</th>
              <th>Visitas</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let stat of filteredStats">
              <td>{{ stat.date }}</td>
              <td><strong>{{ stat.visits }}</strong></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- NO DATA -->
    <div class="no-data" *ngIf="filteredStats.length === 0">
      <h3>ğŸ˜• No hay visitas</h3>
      <p>No se encontraron datos para este perÃ­odo</p>
    </div>
  </ng-container>
</div>